#!/usr/bin/env bash

#function parse_git_dirty {
#  [[ $(git status 2> /dev/null | tail -n1) != "nothing to commit, working directory clean" ]] && echo "*"
#}
#
#function parse_git_branch {
#  #git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e "s/* \(.*\)/ (\1$(parse_git_dirty))/"
#  branch=$(git branch | sed -n -e 's/^\* \(.*\)/\1/p')
#  dirty=$(parse_git_dirty)
#
#  if [ dirty = "*" ]; then
#     echo -e "\033[0;31m\(\$(branch)\$(dirty)\)\033[0m"
#  else
#     echo -e "\033[0;32m\($(branch)$(dirty)\)\033[0m"
#  fi
#}


function git_branch {
  git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/\1/'
}

function markup_git_branch {
  if [[ "x$1" = "x" ]]; then
    echo -e "[$1]"
  else
    if [[ $(git status 2> /dev/null | tail -n1) = "nothing to commit, working directory clean" ]]; then
      echo -e '\033[1;32m['"$1"']\033[0;0m'
    else
      echo -e '\033[1;31m['"$1"'*]\033[0;0m'
    fi
  fi
}